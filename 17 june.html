<!DOCTYPE html>
<html>
<head>
<title>Async and Await</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
</head>
<body>
<div class="container border shadow my-5">
<h1 class="text-center">Javascript Async/await</h1>
<h4 class="text-center mt-3">ATM Withdrawl</h4>

<label for="balanace" class="mb-3 fw-bold">Account Balance ₹</label>
<input type="number" id="balance" placeholder="Enter your balance"><br>

<label for="amount" class="mb-3 fw-bold">Withdrawl Account ₹</label>
<input type="number" id="amount" placeholder="Enter Amount to withdrawl">
<br>
<button onclick="handleATMWithdrawal()" class="btn btn-primary">Withdraw</button>
</div>
<div id="result"></div>

<script>
	function withdrawFromATM(accountBalance,amountToWithdraw)
	{
	 return new Promise ((resolve,reject)=>
		{
		  document.getElementById("result").innerText="💳Processing Your Transaction"
		  setTimeout(()=>{
			   if(amountToWithdraw <= accountBalance){
				resolve(`✅Withdrawal Successfull! ₹${amountToWithdraw} display`)
				}
				else{
				reject(`❌ Insufficient Balance Funds. Your Balance is ₹${accountBalance}`)
				}
			},2000);
		});
	}
	
	//async function
	async function handleATMWithdrawal(){
		const balance = parseFloat(document.getElementById("balance").value);
		const amount= parseFloat(document.getElementById("amount").value);
		
		if (isNaN(balance) || isNaN(amount))
		{
			document.getElementById("result").innerText="⚠️ Please Enter valid Amount";
			return;
		}
		
		try{
			const message =await withdrawFromATM(balance,amount);
			document.getElementById("result").innerText= message;
			} 
		catch(error){
			document.getElementById("result").innerText=error;
			}
		}
</script>
<br><hr>
<h4>Exception Handling</h4>
<p>it shows output in console log</p>
<p id="p1"></p>
<script>
try{
		let numbers=[1,2,3,null,5];  //without null is hsows the output like doubled the number[2,4,6,10].
		let result= numbers.map(num =>
		{
		if (num === null)throw new Error("Null Can be empty")
			return(num*2);});
			console.log(result);
	}
	catch(error)
	{
		console.error("exception",error.message);
	}
</script>	 
<br>
<hr>

</body>
</html>